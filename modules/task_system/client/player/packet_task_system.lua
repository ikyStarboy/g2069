---
--- Generated by PluginCreator
--- task_system handler
--- DateTime:2023-03-23
---

local handles = T(Player, "PackageHandlers")
---@type TaskConfig
local TaskConfig = T(Config, "TaskConfig")

function handles:PushShowTaskCompleteTips(packet)
    local taskConfig = TaskConfig:getCfgById(packet.taskId)
    if taskConfig then
        local text = Lang:toText({"g2069_task_complete_tips", Lang:toText(taskConfig.taskName)})
        Plugins.CallTargetPluginFunc("fly_new_tips", "pushFlyNewTipsText", text)
        Lib.emitEvent(Event.EVENT_TASK_UPDATE_GUIDE_SHOW, packet.taskId, false)
        if (packet.taskId == World.cfg.task_systemSetting.closeMuYeTask) or
                (packet.taskId == World.cfg.task_systemSetting.closeWindTask) then
            Lib.emitEvent(Event.EVENT_SCENE_OBJECT_CLOSE_NOVICE_TELEPORT)
        end
    end
end

function handles:PushShowTaskReceiveTips(packet)
    local taskConfig = TaskConfig:getCfgById(packet.taskId)
    if taskConfig then
        local text = Lang:toText({"g2069_task_receive_tips", Lang:toText(taskConfig.taskName)})
        Plugins.CallTargetPluginFunc("fly_new_tips", "pushFlyNewTipsText", text)

        if taskConfig.guideMap ~= "" and taskConfig.autoGuide then
            Lib.emitEvent(Event.EVENT_TASK_UPDATE_GUIDE_SHOW, packet.taskId)
        end

        if (packet.taskId == World.cfg.task_systemSetting.closeMuYeTask) or
                (packet.taskId == World.cfg.task_systemSetting.closeWindTask) then
            Lib.emitEvent(Event.EVENT_SCENE_OBJECT_CLOSE_NOVICE_TELEPORT)
        end
    end
end