---
--- Generated by PluginCreator
--- task_system entity_common
--- DateTime:2023-03-23
---

local ValueDef = T(Entity, "ValueDef")
-- key				            = {isCpp,	client,	toSelf,	toOther,	init,	               saveDB}
--ValueDef.xxx 					= {false,   false,  true,   false,      0,                      true}
local Entity = Entity

ValueDef.completeTask 					= {false,   false,  true,   false, {},                      true}  -- 已完成任务
ValueDef.mainTask 					= {false,   false,  true,   false, {},                      true}  -- 当前进行的主任务
ValueDef.branchTask 					= {false,   false,  true,   false, {},                      true}  -- 当前进行的支线任务

function Entity:setCompleteTask(value)
    self:setValue("completeTask", value)
end

function Entity:addCompleteTask(taskId)
    local completeTask = self:getCompleteTask()
    if completeTask[taskId] then
        completeTask[taskId] = completeTask[taskId] + 1
    else
        completeTask[taskId] = 1
    end
    self:setCompleteTask(completeTask)
end

function Entity:getCompleteTask()
    return self:getValue("completeTask")
end

function Entity:setMainTask(value)
    self:setValue("mainTask", value)
end

function Entity:getMainTask()
    return self:getValue("mainTask")
end

function Entity:setBranchTask(value)
    self:setValue("branchTask", value)
end

function Entity:getBranchTask()
    return self:getValue("branchTask")
end

function Entity:cleanTaskData()
    self:setMainTask({})
    self:setBranchTask({})
    self:setCompleteTask({})
end