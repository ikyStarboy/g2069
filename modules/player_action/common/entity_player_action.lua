---
--- Generated by PluginCreator
--- player_action entity_common
--- DateTime:2023-05-09
---

local ValueDef = T(Entity, "ValueDef")
-- key				            = {isCpp,	client,	toSelf,	toOther,	init,	               saveDB}
--ValueDef.xxx 					= {false,   false,  true,   false,      0,                      true}
local Entity = Entity

function Entity:canPlayPlayerAction()
    if not self:checkCanControlPlayer() then
        return false
    end
    if not self.onGround or self.isMoving or  self:getFlyMode() ~= 0 then
        return false
    end
    if self:isInStateType(Define.RoleStatus.SKILL_CHARGE_STATE)
        or self:isInStateType(Define.RoleStatus.SKILL_ACTION_STATE)
        or self:isInStateType(Define.RoleStatus.SKILL_FLY_STATE)
        or self:isInStateType(Define.RoleStatus.SKILL_MOVE_STATE)
        or self:isInStateType(Define.RoleStatus.SKILL_BURST_STATE) then
        return false
    end

    if World.isClient then
        ---@type SprintSkillHelper
        local SprintSkillHelper = T(Lib, "SprintSkillHelper")
        if SprintSkillHelper:isInSprintState() then
            return false
        end
    end
    return true
end